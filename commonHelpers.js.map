{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nconst paramsPix = {\n  key: '36975970-2726c7257b1c2078714098d3d',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n  per_page: '3',\n};\n\nexport function onGetPhotoByText(query, pages) {\n  console.log('query- ', query);\n  console.log('pages in pixabay=', pages);\n  const API_KEY = '36975970-2726c7257b1c2078714098d3d';\n  const targetUrl = `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=${paramsPix.image_type}&orientation=${paramsPix.orientation}&safesearch=${paramsPix.safesearch}&page=${pages}&per_page=${paramsPix.per_page}`;\n  return fetch(targetUrl).then(res => {\n    if (!res.ok) {\n      throw new Error(res.status);\n    }\n    return res.json();\n  });\n}\nexport function onFetchError() {\n  iziToast.show({\n    backgroundColor: '#ef4040',\n    message:\n      'Sorry, there are no images matching </br> your search query. Please, try again!',\n    messageColor: '#fff',\n    messageSize: '16px',\n    position: 'topRight',\n  });\n}\n","// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst newGallery = document.querySelector('.main-list');\n\nlet userDataLog = new SimpleLightbox('.main-list a', {\n  captions: true,\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nexport function onCreateGalleryPhoto(data) {\n  // newGallery.innerHTML = '';\n  console.log('data');\n  console.log(data);\n\n  newGallery.insertAdjacentHTML('beforeend', onCreateData(data.hits));\n  userDataLog.refresh();\n}\nfunction onCreateData(data) {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n            <div class=\"list-clock\">\n              <a class=\"gallery-link\" href=${largeImageURL}>\n                <img\n                  class=\"gallery-image\"\n                  src=${webformatURL}\n                  alt=${tags}\n\n                />\n              </a>\n              <ul class=\"adds-list\">\n                <li class=\"info-item\">\n                  <p class=\"text-item text-item-name\">Likes</p>\n                  <p class=\"text-item\">${likes}</p>\n                </li>\n                <li class=\"info-item\">\n                  <p class=\"text-item text-item-name\">Views</p>\n                  <p class=\"text-item\">${views}</p>\n                </li>\n                <li class=\"info-item\">\n                  <p class=\"text-item text-item-name\">Comments</p>\n                  <p class=\"text-item\">${comments}</p>\n                </li>\n                <li class=\"info-item\">\n                  <p class=\"text-item text-item-name\">Downloads</p>\n                  <p class=\"text-item\">${downloads}</p>\n                </li>\n              </ul>\n            </div>\n          </li>`;\n      }\n    )\n    .join('');\n}\n","import { onFetchError, onGetPhotoByText } from './js/pixabay-api';\nimport { onCreateGalleryPhoto } from './js/render-functions';\nconst LoaderText = document.querySelector('.loader');\nconst InputQuery = document.querySelector('.input-query');\nconst btnSbm = document.querySelector('#btn-submit');\n\nconst btnAddLoad = document.querySelector('.js-btn-addload');\nbtnSbm.addEventListener('click', onCreateMarckup);\nbtnAddLoad.addEventListener('click', onPlusPages);\nlet queryData = '';\nlet pages = 1;\nlet totalPhotoCreate = 0;\n\nfunction onCreateMarckup(evt) {\n  if (evt) {\n    evt.preventDefault();\n    queryData = InputQuery.value.replace(/\\s+/g, '+').toLowerCase();\n    document.querySelector('.main-list').innerHTML = '';\n    document.querySelector('.js-text-addload').style.display = 'none';\n    pages = 1;\n    totalPhotoCreate = 0;\n  }\n  LoaderText.style.display = 'inline-block';\n\n  console.log('queryData- ', queryData);\n  onGetPhotoByText(queryData, pages)\n    .then(data => {\n      LoaderText.style.display = 'none';\n      if (!queryData.trim()) {\n        onFetchError(data);\n        document.querySelector('.main-list').innerHTML = '';\n        return;\n      }\n\n      if (data.totalHits === 0) {\n        onFetchError(data);\n      } else if (totalPhotoCreate === data.totalHits) {\n        btnAddLoad.style.display = 'none';\n        document.querySelector('.js-text-addload').style.display = 'block';\n      } else {\n        onCreateGalleryPhoto(data);\n        btnAddLoad.style.display = 'block';\n      }\n      totalPhotoCreate += data.hits.length;\n    })\n    .catch(onFetchError)\n    .finally(() => {\n      InputQuery.value = '';\n    });\n}\n\nfunction onPlusPages() {\n  console.log('pages before =,', pages);\n  pages += 1;\n  console.log('pages after +1 =,', pages);\n  console.log('queryData,', queryData);\n\n  onCreateMarckup();\n}\n"],"names":["paramsPix","onGetPhotoByText","query","pages","targetUrl","res","onFetchError","iziToast","newGallery","userDataLog","SimpleLightbox","onCreateGalleryPhoto","data","onCreateData","webformatURL","largeImageURL","tags","likes","views","comments","downloads","LoaderText","InputQuery","btnSbm","btnAddLoad","onCreateMarckup","onPlusPages","queryData","totalPhotoCreate","evt"],"mappings":"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"}