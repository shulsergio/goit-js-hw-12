{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\nconst paramsPix = {\n  key: '36975970-2726c7257b1c2078714098d3d',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n  per_page: '15',\n};\n\nexport async function onGetPhotoByText(query, pages) {\n  const API_KEY = '36975970-2726c7257b1c2078714098d3d';\n  const targetUrl = `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=${paramsPix.image_type}&orientation=${paramsPix.orientation}&safesearch=${paramsPix.safesearch}&page=${pages}&per_page=${paramsPix.per_page}`;\n\n  try {\n    const response = await axios.get(targetUrl);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    throw new Error(error.response ? error.response.status : error.message);\n  }\n}\n\nexport function onFetchError() {\n  iziToast.show({\n    backgroundColor: '#ef4040',\n    message:\n      'Sorry, there are no images matching </br> your search query. Please, try again!',\n    messageColor: '#fff',\n    messageSize: '16px',\n    position: 'topRight',\n  });\n}\n","// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst newGallery = document.querySelector('.main-list');\n\nlet userDataLog = new SimpleLightbox('.main-list a', {\n  captions: true,\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nexport function onCreateGalleryPhoto(data, flag) {\n  // newGallery.innerHTML = '';\n\n  newGallery.insertAdjacentHTML('beforeend', onCreateData(data.hits));\n  // -------плавный скролл\n  if (flag) {\n    const elem = document.querySelector('.gallery-item');\n    const rect = elem.getBoundingClientRect();\n    console.log('rect.key');\n    console.log(rect.height);\n    window.scrollBy({\n      top: rect.height * 2, // 2 высоты карточки\n      // left: 100,\n      behavior: 'smooth',\n    });\n  }\n  // -------плавный скролл\n  userDataLog.refresh();\n}\nfunction onCreateData(data) {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n            <div class=\"list-clock\">\n              <a class=\"gallery-link\" href=${largeImageURL}>\n                <img\n                  class=\"gallery-image\"\n                  src=${webformatURL}\n                  alt=${tags}\n\n                />\n              </a>\n              <ul class=\"adds-list\">\n                <li class=\"info-item\">\n                  <p class=\"text-item text-item-name\">Likes</p>\n                  <p class=\"text-item\">${likes}</p>\n                </li>\n                <li class=\"info-item\">\n                  <p class=\"text-item text-item-name\">Views</p>\n                  <p class=\"text-item\">${views}</p>\n                </li>\n                <li class=\"info-item\">\n                  <p class=\"text-item text-item-name\">Comments</p>\n                  <p class=\"text-item\">${comments}</p>\n                </li>\n                <li class=\"info-item\">\n                  <p class=\"text-item text-item-name\">Downloads</p>\n                  <p class=\"text-item\">${downloads}</p>\n                </li>\n              </ul>\n            </div>\n          </li>`;\n      }\n    )\n    .join('');\n}\n","import { onFetchError, onGetPhotoByText } from './js/pixabay-api';\nimport { onCreateGalleryPhoto } from './js/render-functions';\nconst LoaderText = document.querySelector('.loader');\nconst InputQuery = document.querySelector('.input-query');\nconst btnSbm = document.querySelector('#btn-submit');\n\nconst btnAddLoad = document.querySelector('.js-btn-addload');\nbtnSbm.addEventListener('click', onCreateMarckup);\nbtnAddLoad.addEventListener('click', onPlusPages);\nlet queryData = '';\nlet pages = 1;\nlet totalPhotoCreate = 0;\nlet flag = 0;\n\nasync function onCreateMarckup(evt) {\n  if (evt) {\n    evt.preventDefault();\n    if (!InputQuery.value.trim()) {\n      document.querySelector('.main-list').innerHTML = '';\n      document.querySelector('.input-query').innerHTML = '';\n      onFetchError();\n\n      return;\n    }\n    queryData = InputQuery.value.replace(/\\s+/g, '+').toLowerCase();\n    document.querySelector('.main-list').innerHTML = '';\n    document.querySelector('.js-text-addload').style.display = 'none';\n    pages = 1;\n    flag = 0;\n    totalPhotoCreate = 0;\n  }\n  LoaderText.style.display = 'inline-block';\n  try {\n    const data = await onGetPhotoByText(queryData, pages);\n    LoaderText.style.display = 'none';\n\n    if (data.totalHits === 0) {\n      onFetchError(data);\n      btnAddLoad.style.display = 'none';\n    } else if (totalPhotoCreate + 15 >= data.totalHits) {\n      onCreateGalleryPhoto(data, flag);\n      btnAddLoad.style.display = 'none';\n      document.querySelector('.js-text-addload').style.display = 'block';\n    } else {\n      onCreateGalleryPhoto(data, flag);\n      btnAddLoad.style.display = 'block';\n    }\n\n    totalPhotoCreate += data.hits.length;\n  } catch (error) {\n    onFetchError();\n  } finally {\n    InputQuery.value = '';\n  }\n}\n\nasync function onPlusPages() {\n  pages += 1;\n  flag = 1;\n  await onCreateMarckup();\n}\n"],"names":["paramsPix","onGetPhotoByText","query","pages","targetUrl","axios","error","onFetchError","iziToast","newGallery","userDataLog","SimpleLightbox","onCreateGalleryPhoto","data","flag","onCreateData","rect","webformatURL","largeImageURL","tags","likes","views","comments","downloads","LoaderText","InputQuery","btnSbm","btnAddLoad","onCreateMarckup","onPlusPages","queryData","totalPhotoCreate","evt"],"mappings":"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"}